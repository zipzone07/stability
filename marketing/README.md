# Маркетинг
## Цель
- Предсказать вероятность покупки в течение 90 дней

## Задачи
1. Изучить данные
2. Разработать полезные признаки
3. Создать модель для классификации пользователей
4. Улучшить модель и максимизировать метрику roc_auc
5. Выполнить тестирование

## Данные
В представленной таблице есть колонки, которые имеют следующее значение:

**apparel-messages** история рекламных рассылок
Рассылки, которые были отправлены клиентам из таблицы покупок. 
- bulk_campaign_id идентификатор рассылки 
- client_id идентификатор клиента 
- message_id идентификатор сообщения 
- event действие с сообщением (отправлено, открыто, покупка…) 
- channel канал рассылки 
- date дата действия 
- created_at дата-время полностью 

**target** 
- client_id идентификатор клиента 
- target клиент совершил покупку в целевом периоде 
Общая база рассылок огромна, поэтому собрали для вас агрегированную по дням статистику по рассылкам. Если будете создавать на основе этой статистики дополнительные признаки, обратите внимание, что нельзя суммировать по колонкам nunique, потому что это уникальные клиенты в пределах дня, у вас нет данных, повторяются ли они в другие дни) 

**full_campaign_daily_event** 
Агрегация общей базы рассылок по дням и типам событий 
- date дата 
- bulk_campaign_id идентификатор рассылки
- count_event_channel* общее количество каждого события 
- nunique_event_channel* количество уникальных client_id в каждом событии 

**full_campaign_daily_event_channel** 
Агрегация по дням с учетом событий и каналов рассылки 
- date дата 
- bulk_campaign_id идентификатор рассылки 
- count_event*_channel* общее количество каждого события по каналам
- nunique_event*_channel* количество уникальных client_id по событиям и каналам 

## Используемые библиотеки
*pandas, numpy, matplotlib, seaborn, flightgbm, sklearn, warnings, optuna, random, phik*

## Итоги
С текущей настройкой модели и подготовленными признакамимы при подборе гиперпараметров с помощью Optuna получили метрику ROC-AUC 0.71

**False Negative**
При пороге 0.1 мы получаем минимальное количество FN (слева снизу)  – 128. Это означает, 
что модель 128 раз предсказывает, что клиент не совершит покупку, но на самом деле он это делает. Это критично, так как мы можем упустить потенциальные продажи. Например, если не предлагаем клиенту скидку или акцию, когда он собирается купить, теряем возможность увеличить доход. 

**False Positive**
С другой стороны при пороге 0.55 мы получаем минимальное количество FP (справа сверху). Это случаи, когда модель предсказывает, что клиент совершит покупку, но на самом деле этого не происходит. В контексте бизнеса это может привести к ненужным затратам на маркетинг или предложения, которые не приведут к конверсии. Например, если отправляем рекламные предложения клиентам, которые не собираются покупать, это может снизить эффективность маркетинговых усилий.
